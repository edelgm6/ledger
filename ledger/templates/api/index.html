<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Other head elements -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://unpkg.com/htmx.org"></script>
</head>


<body>
    <div class="container mt-5">
        {% load tz %} <!-- Load the timezone template tags -->

        <form method="post" hx-post="/" class="form-group">
            {% csrf_token %}

            <!-- Date Field -->
            <div class="form-group">
                <input type="date" name="{{ form.date.html_name }}" id="{{ form.date.id_for_label }}"
                       class="form-control"
                       value="{{ form.date.value|default_if_none:today|date:'Y-m-d' }}"
                       placeholder="{{ form.date.label }}">
                {% for error in form.date.errors %}
                    <div class="alert alert-danger">{{ error }}</div>
                {% endfor %}
            </div>

            <!-- Amount Field -->
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">$</span>
                    </div>
                    <input type="text" name="{{ form.amount.html_name }}" id="{{ form.amount.id_for_label }}"
                           class="form-control"
                           value="{{ form.amount.value|default_if_none:'' }}"
                           placeholder="{{ form.amount.label }}">
                </div>
                {% for error in form.amount.errors %}
                    <div class="alert alert-danger">{{ error }}</div>
                {% endfor %}
            </div>

            <!-- Description Field -->
            <div class="form-group">
                <input type="text" name="{{ form.description.html_name }}" id="{{ form.description.id_for_label }}"
                       class="form-control"
                       value="{{ form.description.value|default_if_none:'' }}"
                       placeholder="{{ form.description.label }}">
                {% for error in form.description.errors %}
                    <div class="alert alert-danger">{{ error }}</div>
                {% endfor %}
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary">Save</button>
        </form>

    </div>

    <div id="transaction-result" class="mt-3">
        {{ success }}
    </div>

    <!-- Script for CSRF Token with htmx -->
    <script>
        document.body.addEventListener('htmx:configRequest', (event) => {
            event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
        });
    </script>
</body>
