{% extends "api/base.html" %} <!-- If you have a base template -->

{% block extra_head %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />

<script>
function initializeSelect2() {
    $('.select2').select2({
        placeholder: "Account",
        allowClear: true
    });
}

// Run initializeSelect2 on document ready
$(document).ready(initializeSelect2);

// Re-run initializeSelect2 after any htmx DOM swaps
$(document).ready(function() {
    document.body.addEventListener('htmx:afterSettle', initializeSelect2);
});
</script>

<style>
    .form-control, .select2-container--default .select2-selection--single {
        width: 100%; /* Ensure full-width for all form controls */
    }

    .select2-container--default .select2-selection--single {
    border: 1px solid #ced4da; /* Match Bootstrap's border color */
    border-radius: 0.25rem; /* Match Bootstrap's border radius */
    height: calc(1.5em + 0.75rem + 2px); /* Match Bootstrap's height */
    padding: 0.375rem 0.75rem; /* Match Bootstrap's padding */
    }
    .select2-container--default .select2-selection--single .select2-selection__rendered {
    line-height: 1.5; /* Match Bootstrap's line height */
    padding-left: 0; /* Remove padding-left */
    padding-right: 0; /* Remove padding-right */
    }
    .select2-container--default .select2-selection--single .select2-selection__arrow {
    height: calc(1.5em + 0.75rem + 2px); /* Match Bootstrap's height */
    }
</style>
{% endblock %}

{% block content %}

<div class="container mt-4">
    <h2>Transactions List</h2>

    {% include "api/transactions-filter-form.html" %}

    <div id="table-and-form">
        {% include "api/transactions-content.html" %}
    </div>

</div>
{% endblock %}

<script>
    // JavaScript to make table rows clickable
    document.addEventListener('DOMContentLoaded', () => {
        const rows = document.querySelectorAll('.clickable-row');
        rows.forEach(row => {
            row.addEventListener('click', () => {
                window.location.href = row.dataset.href;
            });
        });
    });
</script>

<style>
    /* Optional: Add some style to make the clickable rows stand out */
    .clickable-row:hover {
        cursor: pointer;
        background-color: #f5f5f5; /* Light grey */
    }
</style>

