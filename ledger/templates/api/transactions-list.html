{% extends "api/base.html" %} <!-- If you have a base template -->

{% block extra_head %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />

<script>
function initializeSelect2() {
    $('.select2').select2({
        placeholder: "Select an account",
        allowClear: true
    });
}

// Run initializeSelect2 on document ready
$(document).ready(initializeSelect2);

// Re-run initializeSelect2 after any htmx DOM swaps
$(document).ready(function() {
    document.body.addEventListener('htmx:afterSettle', initializeSelect2);
});

</script>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Transactions List</h2>

    {% include "api/transactions-filter-form.html" %}

    <div id="transactions-table" class="table-responsive" style="max-height: 400px; overflow-y: auto;">
    {% include "api/transactions-table.html" %}
    </div>

    <div id="transaction-detail">
    {% include "api/transaction-detail.html" %}
    </div>

    <div id="journal-entry-item-form">
    {% include "api/journal-entry-item-form.html" %}
    </div>

</div>
{% endblock %}


<script>
    // JavaScript to make table rows clickable
    document.addEventListener('DOMContentLoaded', () => {
        const rows = document.querySelectorAll('.clickable-row');
        rows.forEach(row => {
            row.addEventListener('click', () => {
                window.location.href = row.dataset.href;
            });
        });
    });
</script>

<style>
    /* Optional: Add some style to make the clickable rows stand out */
    .clickable-row:hover {
        cursor: pointer;
        background-color: #f5f5f5; /* Light grey */
    }
</style>

